const $=Math.min,q=Math.max,R=Math.round,E=Math.floor,O=t=>({x:t,y:t});function P(t){const{x:e,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:e,right:e+i,bottom:n+o,x:e,y:n}}function S(){return typeof window<"u"}function B(t){return H(t)?(t.nodeName||"").toLowerCase():"#document"}function g(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function V(t){var e;return(e=(H(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function H(t){return S()?t instanceof Node||t instanceof g(t).Node:!1}function U(t){return S()?t instanceof Element||t instanceof g(t).Element:!1}function N(t){return S()?t instanceof HTMLElement||t instanceof g(t).HTMLElement:!1}function z(t){return!S()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof g(t).ShadowRoot}function _(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=T(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(o)}function j(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function k(t){return["html","body","#document"].includes(B(t))}function T(t){return g(t).getComputedStyle(t)}function K(t){if(B(t)==="html")return t;const e=t.assignedSlot||t.parentNode||z(t)&&t.host||V(t);return z(e)?e.host:e}function I(t){const e=K(t);return k(e)?t.ownerDocument?t.ownerDocument.body:t.body:N(e)&&_(e)?e:I(e)}function F(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=I(t),c=o===((i=t.ownerDocument)==null?void 0:i.body),r=g(o);if(c){const s=L(r);return e.concat(r,r.visualViewport||[],_(o)?o:[],s&&n?F(s):[])}return e.concat(o,F(o,[],n))}function L(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function X(t){const e=T(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=N(t),c=o?t.offsetWidth:n,r=o?t.offsetHeight:i,s=R(n)!==c||R(i)!==r;return s&&(n=c,i=r),{width:n,height:i,$:s}}function D(t){return U(t)?t:t.contextElement}function A(t){const e=D(t);if(!N(e))return O(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:c}=X(e);let r=(c?R(n.width):n.width)/i,s=(c?R(n.height):n.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!s||!Number.isFinite(s))&&(s=1),{x:r,y:s}}const Y=O(0);function G(t){const e=g(t);return!j()||!e.visualViewport?Y:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function J(t,e,n){return!1}function W(t,e,n,i){e===void 0&&(e=!1);const o=t.getBoundingClientRect(),c=D(t);let r=O(1);e&&(r=A(t));const s=J()?G(c):O(0);let a=(o.left+s.x)/r.x,l=(o.top+s.y)/r.y,p=o.width/r.x,v=o.height/r.y;if(c){const y=g(c),d=i;let w=y,f=L(w);for(;f&&i&&d!==w;){const h=A(f),u=f.getBoundingClientRect(),m=T(f),b=u.left+(f.clientLeft+parseFloat(m.paddingLeft))*h.x,x=u.top+(f.clientTop+parseFloat(m.paddingTop))*h.y;a*=h.x,l*=h.y,p*=h.x,v*=h.y,a+=b,l+=x,w=g(f),f=L(w)}}return P({width:p,height:v,x:a,y:l})}function Q(t,e){let n=null,i;const o=V(t);function c(){var s;clearTimeout(i),(s=n)==null||s.disconnect(),n=null}function r(s,a){s===void 0&&(s=!1),a===void 0&&(a=1),c();const{left:l,top:p,width:v,height:y}=t.getBoundingClientRect();if(s||e(),!v||!y)return;const d=E(p),w=E(o.clientWidth-(l+v)),f=E(o.clientHeight-(p+y)),h=E(l),m={rootMargin:-d+"px "+-w+"px "+-f+"px "+-h+"px",threshold:q(0,$(1,a))||1};let b=!0;function x(M){const C=M[0].intersectionRatio;if(C!==a){if(!b)return r();C?r(!1,C):i=setTimeout(()=>{r(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(x,{...m,root:o.ownerDocument})}catch{n=new IntersectionObserver(x,m)}n.observe(t)}return r(!0),c}function Z(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,l=D(t),p=o||c?[...l?F(l):[],...F(e)]:[];p.forEach(u=>{o&&u.addEventListener("scroll",n,{passive:!0}),c&&u.addEventListener("resize",n)});const v=l&&s?Q(l,n):null;let y=-1,d=null;r&&(d=new ResizeObserver(u=>{let[m]=u;m&&m.target===l&&d&&(d.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var b;(b=d)==null||b.observe(e)})),n()}),l&&!a&&d.observe(l),d.observe(e));let w,f=a?W(t):null;a&&h();function h(){const u=W(t);f&&(u.x!==f.x||u.y!==f.y||u.width!==f.width||u.height!==f.height)&&n(),f=u,w=requestAnimationFrame(h)}return n(),()=>{var u;p.forEach(m=>{o&&m.removeEventListener("scroll",n),c&&m.removeEventListener("resize",n)}),v==null||v(),(u=d)==null||u.disconnect(),d=null,a&&cancelAnimationFrame(w)}}export{Z as a};
